<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lxf.mall.admin.dao.UmsAdminRoleRelationDao">
    <select id="getPermissionList" resultType="com.lxf.mall.mbg.bo.UmsPermission">
        select p.*  from ums_admin_role_relation ar
           left JOIN ums_role r ON ar.role_id = r.id
           left JOIN ums_role_permission_relation rp ON r.id = rp .role_id
           left JOIN ums_permission p ON rp.permission_id = p.id
           where ar.admin_id = #{id}
        UNION
        select p.* from ums_permission p
            left JOIN ums_admin_permission_relation ap on p.id = ap.permission_id
            where ap.admin_id = #{id}
    </select>
</mapper>